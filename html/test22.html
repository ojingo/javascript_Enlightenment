<!DOCTYPE html>
<html lang="en">
<head>
    <title>Scope is determined at definition not execution</title>
</head>
<body>

<script>
    // code goes here

    var parentFunction = function() {
        var foo = 'foo';
        return function() { // anonymous function being returned
            console.log(foo); // logs 'foo'
        }
    }

    // nestedFunction refers to the nested function returned from parentFunction
    var nestedFunction = parentFunction();

    nestedFunction(); // logs foo because the returned function accesses foo via the scope chain

    // more nested function scope = closures

    var countUpFromZero = function() {
        var count = 0;
        return function() { // return nested child function when countUpFromZero is invoked
            return ++count; // count is defined up the scope chain, in parent function
        };
    }(); // invoke immediately, return nested function

    console.log(countUpFromZero()); // logs 1
    console.log(countUpFromZero()); // logs 2
    console.log(countUpFromZero()); // logs 3


</script>

// html goes here

</body>
</html>